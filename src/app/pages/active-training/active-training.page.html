<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button routerLink="/training-plans">
        <ion-icon name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>
      Trainingsplan
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div *ngIf="loading" class="loading-container">
    <p>Lädt...</p>
  </div>

  <div *ngIf="!loading && activePlan">
    <!-- Trainingsplan Header -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>{{ activePlan.name }}</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <p *ngIf="activePlan.description">{{ activePlan.description }}</p>
        <p class="exercise-count">
          {{ planExercises.length }} {{ planExercises.length === 1 ? 'Übung' : 'Übungen' }}
        </p>
      </ion-card-content>
    </ion-card>

    <!-- Übungen Liste -->
    <div *ngIf="planExercises.length > 0">
      <ion-list>
        <ion-item *ngFor="let planExercise of planExercises; let i = index" lines="full">
          <ion-label>
            <h2>{{ i + 1 }}. {{ planExercise.exercise?.name || 'Unbekannte Übung' }}</h2>
            <p class="exercise-details">
              <strong>{{ planExercise.sets }} Sätze</strong> × 
              <strong>{{ planExercise.reps }} Wiederholungen</strong>
              <span *ngIf="planExercise.weight">
                &#64; {{ planExercise.weight }}kg
              </span>
            </p>
            <p *ngIf="planExercise.notes" class="notes">
              {{ planExercise.notes }}
            </p>
          </ion-label>
        </ion-item>
      </ion-list>
    </div>

    <!-- Keine Übungen -->
    <div *ngIf="planExercises.length === 0" class="empty-state">
      <p>Dieser Trainingsplan enthält noch keine Übungen.</p>
      <p>Fügen Sie Übungen hinzu, um den Plan zu vervollständigen.</p>
    </div>
  </div>

  <!-- Kein aktiver Plan -->
  <div *ngIf="!loading && !activePlan" class="empty-state">
    <p>Kein aktiver Trainingsplan gefunden.</p>
    <p>Wählen Sie einen Trainingsplan aus, um ihn hier anzuzeigen.</p>
  </div>
</ion-content>

